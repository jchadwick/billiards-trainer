# =================================================================
# Billiards Trainer Environment Configuration
# =================================================================
# Copy this file to .env and customize for your environment
# =================================================================

# =================================================================
# Application Settings
# =================================================================
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO
APP_NAME=billiards-trainer
APP_VERSION=1.0.0

# =================================================================
# Security (REQUIRED - Generate secure values)
# =================================================================
# Generate a secure random key with: openssl rand -hex 32
JWT_SECRET_KEY=your-secret-key-here-change-this
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
API_KEY_HEADER=X-API-Key
DEFAULT_API_KEY=your-api-key-here-change-this

# =================================================================
# API Configuration
# =================================================================
API_PORT=8000
WS_PORT=8001
FRONTEND_PORT=80

# =================================================================
# Camera Configuration
# =================================================================
# Camera device index (usually 0 for built-in, 1+ for external)
# NOTE: Use BILLIARDS_VISION__CAMERA__DEVICE_ID for backend config system
BILLIARDS_VISION__CAMERA__DEVICE_ID=0
BILLIARDS_VISION__CAMERA__FPS=30
BILLIARDS_VISION__CAMERA__BUFFER_SIZE=10

# Video Source Configuration
# Set video_source_type to "camera", "file", or "stream"
BILLIARDS_VISION__CAMERA__VIDEO_SOURCE_TYPE=camera
# Path to video file (required when video_source_type="file")
# BILLIARDS_VISION__CAMERA__VIDEO_FILE_PATH=/path/to/video.mp4
# Loop video playback for file sources
BILLIARDS_VISION__CAMERA__LOOP_VIDEO=false
# Starting frame number for video files
BILLIARDS_VISION__CAMERA__VIDEO_START_FRAME=0
# Ending frame number for video files (optional, null = end of video)
# BILLIARDS_VISION__CAMERA__VIDEO_END_FRAME=1000

# Video Processing Settings
# Number of frames to cache when processing video files
BILLIARDS_VISION__PROCESSING__VIDEO_FILE_CACHE_FRAMES=10
# Video playback speed multiplier (1.0 = normal speed)
BILLIARDS_VISION__PROCESSING__VIDEO_PLAYBACK_SPEED=1.0

# Legacy variables (kept for compatibility, but prefer BILLIARDS_ prefixed ones above)
CAMERA_INDEX=0
CAMERA_FPS=30
VISION_BUFFER_SIZE=10
DETECTION_CONFIDENCE_THRESHOLD=0.8

# =================================================================
# Projector Configuration
# =================================================================
PROJECTOR_DISPLAY_INDEX=1
PROJECTOR_WIDTH=1920
PROJECTOR_HEIGHT=1080
PROJECTOR_FULLSCREEN=false

# UDP Broadcasting to Projector
UDP_PROJECTOR_HOST=127.0.0.1
UDP_PROJECTOR_PORT=9999
UDP_PROJECTOR_ENABLED=true

# =================================================================
# Video Feed Configuration (Projector)
# =================================================================
BILLIARDS_PROJECTOR__NETWORK__STREAM_VIDEO_FEED=false
BILLIARDS_PROJECTOR__NETWORK__VIDEO_FEED_QUALITY=85
BILLIARDS_PROJECTOR__NETWORK__VIDEO_FEED_FPS=15
BILLIARDS_PROJECTOR__NETWORK__VIDEO_FEED_SCALE=0.5
BILLIARDS_PROJECTOR__NETWORK__VIDEO_FEED_FORMAT=jpeg

# =================================================================
# Video Feed Configuration (API)
# =================================================================
BILLIARDS_API__VIDEO_FEED__ENABLED=false
BILLIARDS_API__VIDEO_FEED__ENDPOINT=/api/v1/video/feed
BILLIARDS_API__VIDEO_FEED__MJPEG_STREAM=false
BILLIARDS_API__VIDEO_FEED__MJPEG_ENDPOINT=/api/v1/video/stream
BILLIARDS_API__VIDEO_FEED__MAX_CLIENTS=5
BILLIARDS_API__VIDEO_FEED__BUFFER_SIZE=10

# =================================================================
# Physics Configuration
# =================================================================
PHYSICS_TIME_STEP=0.016
PHYSICS_GRAVITY=9.81
BALL_RADIUS=0.02875
TABLE_FRICTION=0.1
CUSHION_RESTITUTION=0.9

# =================================================================
# Performance Settings
# =================================================================
MAX_CONCURRENT_CONNECTIONS=100
FRAME_BUFFER_SIZE=30
MAX_MEMORY_USAGE_MB=2048
API_TIMEOUT=30
WEBSOCKET_TIMEOUT=60

# =================================================================
# Optional Services
# =================================================================
# Database (optional)
# DATABASE_URL=postgresql://user:password@localhost:5432/billiards

# Redis (recommended for production)
REDIS_URL=redis://redis:6379/0
REDIS_PORT=6379
REDIS_MAX_MEMORY=256mb

# =================================================================
# Monitoring
# =================================================================
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_PORT=9091
GRAFANA_PORT=3000
GRAFANA_PASSWORD=admin

# =================================================================
# Docker Resource Limits
# =================================================================
BACKEND_MEMORY_LIMIT=4G
BACKEND_CPU_LIMIT=2.0
BACKEND_MEMORY_RESERVATION=1G
BACKEND_CPU_RESERVATION=0.5

FRONTEND_MEMORY_LIMIT=512M
FRONTEND_CPU_LIMIT=0.5
FRONTEND_MEMORY_RESERVATION=128M
FRONTEND_CPU_RESERVATION=0.1

# =================================================================
# Build Configuration
# =================================================================
BUILD_DATE=2024-01-01
BUILD_VERSION=1.0.0
BUILD_COMMIT=dev
